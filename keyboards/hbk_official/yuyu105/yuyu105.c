/* SPDX-License-Identifier: GPL-2.0-or-later */

#include "yuyu105.h"


#ifdef RGB_MATRIX_ENABLE

#    define XX NO_LED
led_config_t g_led_config = {  //

	{
        // Key Matrix to LED Index
        // !! 轴灯对应矩阵的接线顺序
		{0,   1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18},
		{19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37},
		{38, 39, 40, XX, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55},
		{56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, XX, 72, 73},
		{74, 75, 76, XX, XX, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90},
		{91, 92, 93, 94, 95, 96, 97, 98, XX, XX, XX, XX, XX, 99, 100, 101, 102, 103, 104},
        // !! 轴灯对应矩阵的接线顺序
	}, 
    {
        // LED Index to Physical Position  
        {6, 3}, {17, 3}, {34, 3}, {50, 3}, {62, 3}, {73, 3}, {84, 3}, {95, 3}, {106, 3}, {118, 3}, {129, 3}, {140, 3}, {151, 3}, {162, 3}, {174, 3}, {185, 3}, {196, 3}, {207, 3}, {218, 3}, 
		{6, 13}, {17, 13}, {28, 13}, {39, 13}, {50, 13}, {62, 13}, {73, 13}, {84, 13}, {95, 13}, {106, 13}, {118, 13}, {129, 13}, {140, 13}, {151, 13}, {162, 13}, {174, 13}, {185, 13}, {202, 13}, {218, 13}, 
		{6, 24}, {17, 24}, {28, 24}, {39, 26}, {53, 24}, {67, 24}, {78, 24}, {90, 24}, {101, 24}, {112, 24}, {123, 24}, {134, 24}, {146, 24}, {157, 24}, {168, 24}, {179, 24}, {190, 24}, {204, 24}, {218, 24}, 
		{6, 35}, {17, 35}, {28, 35}, {52, 35}, {70, 35}, {81, 35}, {92, 35}, {104, 35}, {115, 35}, {126, 35}, {137, 35}, {148, 35}, {160, 35}, {171, 35}, {182, 35}, {200, 35}, {218, 35}, 
		{6, 45}, {17, 45}, {28, 45}, {39, 48}, {57, 45}, {76, 45}, {87, 45}, {98, 45}, {109, 45}, {120, 45}, {132, 45}, {143, 45}, {154, 45}, {165, 45}, {176, 45}, {192, 45}, {207, 45}, {218, 45}, 
		{6, 56}, {17, 56}, {28, 56}, {52, 56}, {66, 56}, {80, 56}, {122, 56}, {162, 56}, {174, 56}, {185, 56}, {196, 56}, {207, 56}, {218, 56}, 
        //!! 按接线顺序排列轴灯的物理位置
	}, 
    {
        // LED Index to Flag
		4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 
		4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 
		4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 
		4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 
		4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 
		4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 
        //!! 每个灯是干啥用的
	}   
};

#endif

// uf2跳转bl
#define MAGIC_BOOT 0x544F4F42UL
#define MAGIC_REG *(volatile uint32_t*)0x20004000
void bootloader_jump(void) {
    MAGIC_REG = MAGIC_BOOT;
    NVIC_SystemReset();
}