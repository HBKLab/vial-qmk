/* SPDX-License-Identifier: GPL-2.0-or-later */

#include "hbk68.h"
#include "uart.h"

#ifdef RGB_MATRIX_ENABLE

#    define XX NO_LED
led_config_t g_led_config = {  //

	{
        // Key Matrix to LED Index
        // !! 轴灯对应矩阵的接线顺序
		{0, 1, 4, 2, 4, 11, 6, 0, 10, 9, 10, 12, 0, 3, 5},
		{0, 9, 2, 11, 6, 7, 4, 9, 8, 4, 2, 5, 12, 10, XX},
		{8, 6, 11, 0, 5, 6, 5, 2, 4, 3, 3, 3, 12, XX, XX},
		{10, 3, 12, 12, 6, 5, 1, 0, 7, 4, 6, 0, XX, 11, XX},
		{0, 4, 7, 8, XX, XX, XX, XX, XX, 11, 0, 5, 6, 2, 9},
        // !! 轴灯对应矩阵的接线顺序    
	}, 
    {
        // LED Index to Physical Position  
        {7, 2}, {14, 2}, 
        {21, 2}, {28, 2}, {35, 2},
        {42, 2}, {49, 2}, {56, 2}, {72, 2}, {70, 2},
        {77, 2}, {84, 2}, {91, 2}, {108, 2}, {115, 2}

        // !! 按接线顺序排列轴灯的物理位置
	}, 
    {
        // LED Index to Flag
		4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4
        //!! 每个灯是干啥用的
	}
    // {
        
    //     {0, 1},  //
    //     {2, 3}  // !! 轴灯对应矩阵的接线顺序
    // },
    // {
    //     // LED Index to Physical Position                                                                                                                                               
    //     {2, 3},    {19, 3},     // row0
    //     {184, 16}, {163, 16}   // row1
    //     //!! 按接线顺序排列轴灯的物理位置
    // },

    // {
    //     // LED Index to Flag
    //     4, 4,  //
    //     2, 2  //!! 每个灯是干啥用的

		// {7, 2}, {32, 2}, {46, 2}, {60, 2}, {74, 2}, {91, 2}, {105, 2}, {119, 2}, {133, 2}, {150, 2}, {164, 2}, {178, 2}, {192, 2}, {217, 2}, 
		// {7, 15}, {21, 15}, {35, 15}, {49, 15}, {63, 15}, {77, 15}, {91, 15}, {105, 15}, {119, 15}, {133, 15}, {147, 15}, {161, 15}, {175, 15}, {217, 15}, 		
		// {10, 25}, {28, 25}, {42, 25}, {56, 25}, {70, 25}, {84, 25}, {98, 25}, {112, 25}, {126, 25}, {140, 25}, {154, 25}, {168, 25}, {182, 25}, {196, 15},		
		// {12, 36}, {32, 36}, {46, 36}, {60, 36}, {74, 36}, {88, 36}, {102, 36}, {116, 36}, {130, 36}, {144, 36}, {158, 36}, {172, 36}, {194, 36}, {200, 25}, 
		// {16, 46}, {38, 46}, {52, 46}, {66, 46}, {80, 46}, {94, 46}, {108, 46}, {122, 46}, {136, 46}, {150, 46}, {164, 46}, {184, 46}, {203, 46}, {217, 25}, 
		// {9, 56}, {26, 56}, {44, 56}, {96, 56}, {149, 56}, {166, 56}, {189, 56}, {203, 56}, {217, 56}, 
    
};

#endif
//键盘预初始化代码
void keyboard_pre_init_kb(void) {
    // 串口初始化
    uart_init(115200);
    // keyboard_pre_init_user();
}

// uf2跳转bl
#define MAGIC_BOOT 0x544F4F42UL
#define MAGIC_REG *(volatile uint32_t*)0x20004000
void bootloader_jump(void) {
    MAGIC_REG = MAGIC_BOOT;
    NVIC_SystemReset();
}